<?php

$locale = Core_Locale::loadDefault();

$coordinates = $this->coordinates;

/** @var $value Calc_Value */
$value = $this->value;

$title = __('Techno', 'element', 'element');
?>

<script type="text/javascript">
    $('#element_edit').children('div.modal-header').children('h3').html(<?=json_encode($title)?>);
</script>

<?php
$editForm = new UI_Form('element_editForm');
$editForm->setAction('techno/element/edit-submit');
$editForm->setAjax(true, 'elementEditSuccess');

// Valeur
$digitalValueField = new UI_Form_Element_Text('digitalValue');
$digitalValueField->setLabel(__('UI', 'name', 'value'));
$digitalValueField->setValue($locale->formatNumberForInput($value->getDigitalValue()));
$digitalValueField->setRequired(true);
$editForm->addElement($digitalValueField);

// Incertitude
$uncertaintyField = new UI_Form_Element_Text('uncertainty');
$uncertaintyField->setLabel(__('UI', 'name', 'uncertainty'));
$uncertaintyField->setValue($locale->formatNumberForInput($value->getRelativeUncertainty()));
$editForm->addElement($uncertaintyField);

// Famille
$familyField = new UI_Form_Element_Hidden('idFamily');
$familyField->setValue($this->family->getId());
$editForm->addElement($familyField);

// CoordonnÃ©es
$coordinatesField = new UI_Form_Element_Hidden('coordinates');
$coordinatesField->setValue(json_encode($coordinates));
$editForm->addElement($coordinatesField);

echo $editForm->render();
