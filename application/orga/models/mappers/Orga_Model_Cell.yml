# orga\models\mappers\Orga_Model_Cell.yml
Orga_Model_Cell:
  type: entity
  repositoryClass: Orga_Model_Repository_Cell
  table: Orga_Cell

  id:
    id:
      column: id
      type: integer
      generator:
        strategy: AUTO

  fields:
    membersHashKey:
      column: membersHashKey
      type: string
      length: 40
      nullable: false
    tag:
      column: tag
      type: text
      nullable: false
    relevant:
      column: relevant
      type: boolean
      nullable: false
    allParentsRelevant:
      column: allParentsRelevant
      type: boolean
      nullable: false
    inventoryStatus:
      column: inventoryStatus
      type: string
      length: 15
      nullable: false

  oneToOne:
    docLibraryForAFInputSetPrimary:
      targetEntity: Doc\Domain\Library
      joinColumn:
        name: idDocLibraryForAFInputSetsPrimary
        referencedColumnName: id
        nullable: true
        unique: true
      orphanRemoval: true
      cascade: [ persist, remove ]
    aFInputSetPrimary:
      targetEntity: AF\Domain\InputSet\PrimaryInputSet
      joinColumn:
        name: idAFInputSetPrimary
        referencedColumnName: id
        nullable: true
      orphanRemoval: true
      cascade: [ persist, remove ]
    dWCube:
      targetEntity: DW_Model_Cube
      joinColumn:
        name: idDWCube
        referencedColumnName: id
        nullable: true
        unique: true
      orphanRemoval: true
      cascade: [ persist, remove ]
    docLibraryForSocialGenericActions:
      targetEntity: Doc\Domain\Library
      joinColumn:
        name: idDocLibraryForSocialGenericActions
        referencedColumnName: id
        nullable: true
        unique: true
      orphanRemoval: true
      cascade: [ persist, remove ]
    docLibraryForSocialContextActions:
      targetEntity: Doc\Domain\Library
      joinColumn:
        name: idDocLibraryForSocialContextActions
        referencedColumnName: id
        nullable: true
        unique: true
      orphanRemoval: true
      cascade: [ persist, remove ]

  oneToMany:
    cellsGroups:
      targetEntity: Orga_Model_CellsGroup
      mappedBy: containerCell
      cascade: [ persist, remove ]
    acl:
      targetEntity: Orga\Model\ACL\CellAuthorization
      mappedBy: resource
      cascade: [ all ]
      orphanRemoval: true
    adminRoles:
      targetEntity: Orga\Model\ACL\Role\CellAdminRole
      mappedBy: cell
      cascade: [ all ]
      orphanRemoval: true
    managerRoles:
      targetEntity: Orga\Model\ACL\Role\CellManagerRole
      mappedBy: cell
      cascade: [ all ]
      orphanRemoval: true
    contributorRoles:
      targetEntity: Orga\Model\ACL\Role\CellContributorRole
      mappedBy: cell
      cascade: [ all ]
      orphanRemoval: true
    observerRoles:
      targetEntity: Orga\Model\ACL\Role\CellObserverRole
      mappedBy: cell
      cascade: [ all ]
      orphanRemoval: true

  manyToOne:
    granularity:
      targetEntity: Orga_Model_Granularity
      inversedBy: cells
      joinColumn:
        name: idGranularity
        referencedColumnName: id

  manyToMany:
    members:
      targetEntity: Orga_Model_Member
      inversedBy: cells
      orderBy:
        tag: ASC
      joinTable:
        name: Orga_Cell_Member
        joinColumns:
          idCell:
            referencedColumnName: id
        inverseJoinColumns:
          idMember:
            referencedColumnName: id
    socialCommentsForAFInputSetPrimary:
      targetEntity: Social_Model_Comment
      joinTable:
        name: Orga_Cell_AFInputSetPrimaryComments
        joinColumns:
          idCell:
            referencedColumnName: id
            nullable: false
        inverseJoinColumns:
          idSocialComment:
            referencedColumnName: id
            nullable: false
            unique: true
      cascade: [ persist, remove ]
    socialGenericActions:
      targetEntity: Social_Model_GenericAction
      joinTable:
        name: Orga_Cell_GenericActions
        joinColumns:
          idCell:
            referencedColumnName: id
            nullable: false
        inverseJoinColumns:
          idSocialGenericAction:
            referencedColumnName: id
            nullable: false
            unique: true
      cascade: [ persist, remove ]
    socialContextActions:
      targetEntity: Social_Model_ContextAction
      joinTable:
        name: Orga_Cell_ContextActions
        joinColumns:
          idCell:
            referencedColumnName: id
            nullable: false
        inverseJoinColumns:
          idSocialContextAction:
            referencedColumnName: id
            nullable: false
            unique: true
      cascade: [ persist, remove ]
    dWResults:
      targetEntity: DW_Model_Result
      joinTable:
        name: Orga_Cell_DWResults
        joinColumns:
          idCell:
            referencedColumnName: id
            nullable: false
            onDelete: CASCADE
        inverseJoinColumns:
          idDWResult:
            referencedColumnName: id
            nullable: false
            unique: true
            onDelete: CASCADE
      cascade: [ persist, remove ]

  indexes:
    membersHashKey:
      columns: [membersHashKey]
